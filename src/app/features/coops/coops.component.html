<div class="mb-3">
  <h1 class="text-secondary-yellow">Cooperativa</h1>
  <ol class="breadcrumb breadcrumb-arrows">
    <li class="breadcrumb-item">
      <a [routerLink]="['/incio']" class="text-primary-blue">Inicio</a>
    </li>
    <li class="breadcrumb-item active">
      <a href="#" class="text-secondary-yellow">Cooperativa</a>
    </li>
  </ol>
</div>

<div class="container-xl">
  @if (isLoading) {
  <div
    class="d-flex justify-content-center align-items-center"
    style="height: 400px"
  >
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
  </div>
  } @else if (currentCoop) {
  <div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h3 class="card-title">
        <i class="ti ti-building-store me-2"></i>
        Información de la Cooperativa
      </h3>
      <button class="btn btn-primary" (click)="toggleEdit()">
        <i class="ti" [class.ti-edit]="!isEditing" [class.ti-x]="isEditing"></i>
        {{ isEditing ? "Cancelar" : "Editar" }}
      </button>
    </div>

    <div class="card-body">
      @if (isEditing) {
      <app-coop-form
        [cooperative]="currentCoop"
        [isLoading]="isLoading"
        (formSubmit)="onFormSubmit($event)"
        (cancelEdit)="onCancelEdit()"
      >
      </app-coop-form>
      } @else {
      <div class="row">
        <div class="col-12 text-center mb-4">
          <div
            class="avatar avatar-xl"
            [style.background-image]="
              currentCoop.logo
                ? 'url(' + currentCoop.logo + ')'
                : 'url(assets/static/coop-placeholder.png)'
            "
          >
            @if (!currentCoop.logo) {
            <span class="avatar-initials bg-primary-lt">
              {{ currentCoop.name.charAt(0) }}
            </span>
            }
          </div>
        </div>

        <div class="col-md-6 mb-3">
          <div class="card card-sm">
            <div class="card-body">
              <div class="d-flex align-items-center">
                <span class="avatar bg-primary-lt me-3">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="icon icon-tabler icons-tabler-outline icon-tabler-abc"
                  >
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M3 16v-6a2 2 0 1 1 4 0v6" />
                    <path d="M3 13h4" />
                    <path d="M10 8v6a2 2 0 1 0 4 0v-1a2 2 0 1 0 -4 0v1" />
                    <path
                      d="M20.732 12a2 2 0 0 0 -3.732 1v1a2 2 0 0 0 3.726 1.01"
                    />
                  </svg>
                </span>
                <div>
                  <div class="text-muted">Nombre</div>
                  <div class="font-weight-medium">{{ currentCoop.name }}</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-6 mb-3">
          <div class="card card-sm">
            <div class="card-body">
              <div class="d-flex align-items-center">
                <span class="avatar bg-primary-lt me-3">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="icon icon-tabler icons-tabler-outline icon-tabler-map-pins"
                  >
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path
                      d="M10.828 9.828a4 4 0 1 0 -5.656 0l2.828 2.829l2.828 -2.829z"
                    />
                    <path d="M8 7l0 .01" />
                    <path
                      d="M18.828 17.828a4 4 0 1 0 -5.656 0l2.828 2.829l2.828 -2.829z"
                    />
                    <path d="M16 15l0 .01" />
                  </svg>
                </span>
                <div>
                  <div class="text-muted">Dirección</div>
                  <div class="font-weight-medium">
                    {{ currentCoop.address }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-6 mb-3">
          <div class="card card-sm">
            <div class="card-body">
              <div class="d-flex align-items-center">
                <span class="avatar bg-primary-lt me-3">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="icon icon-tabler icons-tabler-outline icon-tabler-phone"
                  >
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path
                      d="M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2"
                    />
                  </svg>
                </span>
                <div>
                  <div class="text-muted">Teléfono</div>
                  <div class="font-weight-medium">{{ currentCoop.phone }}</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-6 mb-3">
          <div class="card card-sm">
            <div class="card-body">
              <div class="d-flex align-items-center">
                <span class="avatar bg-primary-lt me-3">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="icon icon-tabler icons-tabler-outline icon-tabler-mail"
                  >
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path
                      d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z"
                    />
                    <path d="M3 7l9 6l9 -6" />
                  </svg>
                </span>
                <div>
                  <div class="text-muted">Correo Electrónico</div>
                  <div class="font-weight-medium">{{ currentCoop.email }}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      }
    </div>
  </div>
  } @else {
  <div class="empty">
    <div class="empty-icon">
      <i class="ti ti-alert-circle text-muted" style="font-size: 48px"></i>
    </div>
    <p class="empty-title">No se encontró información de la cooperativa</p>
    <p class="empty-subtitle text-muted">
      No se pudo cargar la información de la cooperativa. Por favor, intente
      nuevamente más tarde.
    </p>
  </div>
  }
</div>
