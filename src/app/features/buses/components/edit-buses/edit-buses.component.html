<div class="mb-3">
  <h1 class="text-secondary-yellow">Editar Bus</h1>
  <ol class="breadcrumb breadcrumb-arrows">
    <li class="breadcrumb-item">
      <a [routerLink]="['/inicio']" class="text-primary-blue">Inicio</a>
    </li>
    <li class="breadcrumb-item">
      <a [routerLink]="['/buses']" class="text-primary-blue">Buses</a>
    </li>
    <li class="breadcrumb-item active">
      <a href="#" class="text-secondary-yellow">Editar Bus</a>
    </li>
  </ol>
</div>

<div class="container-xl">
  <!-- Loading Indicator -->
  <div *ngIf="isLoading" class="text-center my-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
    <p class="mt-2">Cargando datos del bus...</p>
  </div>

  <div *ngIf="!isLoading && currentBus">
    <div class="row mb-3">
      <div class="col">
        <div class="d-flex justify-content-between align-items-center">
          <h2>Editar Bus</h2>
          <button class="btn btn-secondary" (click)="cancel()">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
              <path d="M5 12l14 0"></path>
              <path d="M5 12l6 6"></path>
              <path d="M5 12l6 -6"></path>
            </svg>
            Volver
          </button>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <ul class="nav nav-tabs card-header-tabs" data-bs-toggle="tabs">
              <li class="nav-item">
                <a href="#tabs-datos" class="nav-link active" data-bs-toggle="tab">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-bus" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                    <path d="M6 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path>
                    <path d="M18 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path>
                    <path d="M4 17h-2v-11a1 1 0 0 1 1 -1h14a5 5 0 0 1 5 5v5h-2m-4 0h-8"></path>
                    <path d="M16 5l1.5 7l4.5 0"></path>
                    <path d="M2 10l15 0"></path>
                    <path d="M7 5l0 5"></path>
                    <path d="M12 5l0 5"></path>
                  </svg>
                  Datos del Bus
                </a>
              </li>
            </ul>
          </div>
          <div class="card-body">
            <div class="tab-content">
              <div class="tab-pane active show" id="tabs-datos">
                <app-form-buses
                  [cachedBusData]="currentBus"
                  [isEditMode]="true"
                  (formSubmitted)="onFormSubmitted($event)">
                </app-form-buses>
                <div class="form-footer d-flex justify-content-end mt-3">
                  <div class="btn-list">
                    <button class="btn btn-success" (click)="saveBus()">
                      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-device-floppy" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"></path>
                        <path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path>
                        <path d="M14 4l0 4l-6 0l0 -4"></path>
                      </svg>
                      Guardar Bus
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
